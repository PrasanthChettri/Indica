"""
Stub responses for testing the Indica stock prediction API.
This module contains mock data that mimics the structure of real predictions.
"""

def get_stub_predictions():
    """
    Returns mock prediction data for testing purposes.
    
    Returns:
        dict: Mock predictions with the same structure as real API responses
    """
    return {
        "predictions": [
            {
                "stock_name": "Tata Motors",
                "ticker": "TATAMOTORS.NS",
                "prediction": "As a long-term retail investor from India, analyzing Tata Motors (TATAMOTORS.NS) requires a look at both the immediate signals and the broader picture.\n\n**Overall Assessment for a Long-Term Investor:**\n\nTata Motors has seen a significant price correction over the past 9-10 months, trading much closer to its 52-week low. While the recent Q1 FY26 sales figures show a notable year-on-year decline in core domestic segments (Passenger Vehicles and Commercial Vehicles), the company's attractive valuation metrics (low PE, P/S), strong Return on Equity (ROE), and strategic focus on Electric Vehicles (EVs) and international expansion present a compelling long-term value proposition. The successful AGM and management's optimistic outlook for future quarters due to macro factors also provide some reassurance. However, the immediate challenge lies in the subdued domestic demand.\n\n**Bearish Signals:**\n\n1.  **Significant Price Downtrend:** The stock has fallen sharply from over ₹1040 in September 2024 to ₹689 by June 2025, indicating strong selling pressure over the past few months.\n2.  **Weak Q1 FY26 Sales Performance:** The most impactful news is the year-on-year decline in Q1 FY26 sales:\n    *   Total sales down from 2.29 lakh units to 2.10 lakh units.\n    *   Commercial Vehicle (CV) sales down 6% YoY (domestic CV down 9%).\n    *   Passenger Vehicle (PV) sales down 10% YoY (domestic PV down 10%).\n    *   Specific segments like Compact, UV2 (Safari, Harrier), and SCV cargo/pickup showing significant domestic declines. This directly impacts revenue and profitability.\n3.  **Current Price Closer to 52-Week Low:** At ₹689, it's significantly below its 52-week high of ₹1179, suggesting a lack of strong buying conviction at higher levels and potential for further downside if negative sentiment persists.\n4.  **Lower Trading Volume:** Current volume (4.93 million) is significantly lower than the average volume (15.11 million), indicating reduced market participation and potentially weak conviction behind any recent price movements.\n5.  **RSI Slightly Below Neutral:** An RSI of 45.99 is slightly below the neutral 50 mark, indicating a slight bearish bias, though not oversold.\n\n**Bullish Signals:**\n\n1.  **Attractive Valuation:**\n    *   **PE Ratio (10.60) and Forward PE (10.28):** These are quite low for a company of Tata Motors' size and potential, suggesting the stock might be undervalued, especially if future growth materializes.\n    *   **Price to Sales (0.57):** Very low, indicating high sales relative to market capitalization, which can be a strong value indicator.\n2.  **Strong Fundamentals:**\n    *   **Return on Equity (ROE) of 21.07%:** This is an excellent ROE, demonstrating the company's efficiency in generating profits from shareholder equity.\n    *   **Profit Margins (6.32%):** Decent for the auto industry.\n3.  **Positive Technical Momentum Shift (MACD):** The MACD histogram (13.6) is positive, and the MACD line (-23.46) is above the signal line (-37.07), indicating a bullish crossover. This suggests a potential shift in short-term momentum, even if the overall trend is still negative.\n4.  **Strong EV Segment Growth & New Launches:**\n    *   EV sales showed \"healthy growth trajectory\" towards the end of Q1 FY26, with June '25 EV sales up 12% YoY.\n    *   Successful launches of new models like CURVV, Altroz, and Harrier.ev, which are receiving positive market response and are crucial for future growth.\n5.  **Robust Export Performance:** CV International Business (IB) sales grew by a strong 68% YoY in Q1 FY26, offsetting some of the domestic weakness.\n6.  **Positive Management Commentary:** Management expects \"progressive improvement\" in the CV industry due to favorable macro factors like monsoon, potential repo rate reduction, and infrastructure push.\n7.  **Positive Broad Market Sentiment:** Nifty, Sensex, and Bank Nifty are all showing positive changes, and VIX is slightly down, indicating a generally supportive market environment.\n8.  **Sound Corporate Governance:** All resolutions passed at the AGM, including financial statements and dividend declaration, indicate stable governance and shareholder confidence.\n\n**Prediction for Tomorrow (Short-Term):**\n\nGiven the recent release of the Q1 FY26 sales figures (July 1st and July 4th), which show a significant year-on-year decline in overall domestic sales for both Passenger Vehicles and Commercial Vehicles, the market is likely to react negatively to this news. While there are positive aspects like strong EV momentum and export growth, the headline numbers of declining core sales are a significant concern for short-term investors. The stock has already corrected, but confirmation of weak operational performance could lead to further pressure.\n\nTherefore, considering the immediate impact of the negative sales figures, the stock will likely go **down** tomorrow, or at best, trade flat with a negative bias as the market fully digests the Q1 sales performance.\n\n**Long-Term Investor's Action:**\n\nFor a long-term investor, the current price offers a potentially attractive entry point given the strong fundamentals (ROE, low PE/P/S) and strategic focus on EVs and exports. However, it would be prudent to monitor the upcoming full Q1 FY26 financial results (signaled by the trading window closure) for a clearer picture of profitability and management's detailed outlook. Any further significant dips due to short-term reactions to sales figures could be seen as opportunities for gradual accumulation, provided the long-term growth story (EVs, exports, macro recovery) remains intact.",
                "news_impact": "Here's an analysis of the provided Tata Motors announcements:\n\n## Tata Motors Announcements Analysis\n\n### 1. Announcement: Tata Motors SIAM Report - April To June 2025\n\n*   **Date of Article:** July 4, 2025\n*   **Summary of Announcement:** This announcement provides Tata Motors' production, domestic sales, and export figures for the first quarter of the fiscal year 2026 (April to June 2025), as reported to the Society of Indian Automobile Manufacturers (SIAM). It details sales and production across various vehicle categories.\n*   **Key Dates, Metrics, and Figures:**\n    *   **Period:** April to June 2025 (Q1 FY26)\n    *   **Data Presented:** Production, Domestic Sales, and Exports for various vehicle categories.\n    *   **Vehicle Categories and Key Figures (Q1 FY26 vs. Q1 FY25):**\n        *   **Micro:** NANO - 0 units (both periods)\n        *   **Compact:**\n            *   ZEST, BOLT, TIAGO, TIGOR, ALTROZ: Production: 35,496 (FY26) vs. 40,938 (FY25); Domestic Sales: 32,801 (FY26) vs. 37,578 (FY25); Exports: 548 (FY26) vs. 575 (FY25).\n            *   NEXON, PUNCH: Production: 80,001 (FY26) vs. 92,348 (FY25); Domestic Sales: 76,230 (FY26) vs. 91,036 (FY25); Exports: 320 (FY26) vs. 3 (FY25).\n        *   **UV1:** CURVV: Production: 9,135 (FY26) vs. 0 (FY25); Domestic Sales: 8,272 (FY26) vs. 0 (FY25); Exports: 101 (FY26) vs. 0 (FY25). This indicates the introduction or ramp-up of the CURVV model.\n        *   **UV2:** SAFARI, HARRIER, SUMO: Production: 6,488 (FY26) vs. 9,763 (FY25); Domestic Sales: 6,536 (FY26) vs. 9,490 (FY25); Exports: 1 (FY26) vs. 0 (FY25). This shows a decline in production and sales for these models compared to the previous year.\n        *   **V1:** MAGIC EXPRESS: Production: 5,956 (FY26) vs. 4,959 (FY25); Domestic Sales: 5,348 (FY26) vs. 5,067 (FY25). Shows an increase.\n        *   **V2:** MAGIC, MAGIC IRIS: Production: 0 (FY26) vs. 73 (FY25); Domestic Sales: 182 (FY26) vs. 61 (FY25); Exports: 65 (FY26) vs. 54 (FY25). Significant drop in production, but increased sales and exports.\n        *   **N1- A1 (ACE, ACE EX, ACE Zip):** Production: 14,438 (FY26) vs. 23,735 (FY25); Domestic Sales: 15,580 (FY26) vs. 19,642 (FY25); Exports: 830 (FY26) vs. 411 (FY25). Decline in production and domestic sales, but a strong increase in exports.\n        *   **N1- A2 (Yodha, Super Ace, Intra, Ace Mega, Xenon, 207DI):** Production: 14,976 (FY26) vs. 17,529 (FY25); Domestic Sales: 12,671 (FY26) vs. 14,599 (FY25); Exports: 956 (FY26) vs. 579 (FY25). Similar trend to N1-A1 with declining domestic volumes and increasing exports.\n        *   **N2 - Tippers/Haulage:** Across categories N2-A1 to N2-A4, most segments show modest increases in production and domestic sales, and generally increasing exports.\n        *   **M2/M3 - Buses:** Most bus segments show an increase in production and domestic sales, with varying export figures. Notably, M3-A1 and M3-B1 show zero production in FY26, while M3-F2 shows a significant jump in production and exports.\n        *   **N3 - Tippers/Haulage/Tractors:** Mixed trends. Some segments like N3-A2 and N3-B1(e) show significant increases in production and domestic sales, while others like N3-B1(b) and N3-B2(d) show declines. Exports are generally increasing across these segments.\n    *   **Note:** Figures are unaudited and subject to change after audit.\n*   **Comparative Importance/Weight:** **8/10**\n    *   This is a crucial operational update for Tata Motors, providing a granular view of their sales and production performance across all vehicle segments. It allows for direct year-on-year comparison and helps assess the health of different product lines and market segments. The introduction of new models like CURVV is also highlighted.\n\n### 2. Announcement: Tata Motors Q1 FY26 sales: 2.10 lakh units, CV down 6%, PV down 10%, EV sales up 12%, new product launches noted.\n\n*   **Date of Article:** July 1, 2025\n*   **Summary of Announcement:** This announcement provides a high-level overview of Tata Motors' total sales for Q1 FY26, detailing the performance of Commercial Vehicles (CV) and Passenger Vehicles (PV), including Electric Vehicles (EV). It also mentions new product launches and strategic initiatives.\n*   **Key Dates, Metrics, and Figures:**\n    *   **Period:** Q1 FY26 (April - June 2025)\n    *   **Total Sales (Domestic & International):** 2,10,415 units (Q1 FY26) vs. 2,29,891 units (Q1 FY25) - a year-on-year decline.\n    *   **Total CV Sales:** 85,606 units (Q1 FY26) vs. 91,209 units (Q1 FY25) - a decrease of 6% year-on-year.\n        *   **CV Domestic Sales:** 79,572 units (Q1 FY26) vs. 87,615 units (Q1 FY25) - a decline of 9%.\n        *   **CV International Business (IB) Sales:** 6,034 units (Q1 FY26) vs. 3,594 units (Q1 FY25) - a robust growth of 68%.\n        *   **CV Segment Performance Highlights:**\n            *   HCV Trucks: Down 12% YoY in Q1 FY26.\n            *   ILMCV Trucks: Up 5% YoY in Q1 FY26.\n            *   Passenger Carriers: Up 1% YoY in Q1 FY26.\n            *   SCV cargo and pickup: Down 17% YoY in Q1 FY26.\n            *   CV IB: Up 68% YoY in Q1 FY26.\n        *   **CV Management Commentary (Mr. Girish Wagh):** Subdued Q1 for CV industry, muted HCV and SCVPU, modest growth in Buses/Vans/ILMCVs. Expects progressive improvement due to monsoon, repo rate reduction, and infrastructure push. Highlights launch of Ace Pro and AC cabins in trucks. Expansion into Egypt and MENA region.\n    *   **Total PV Sales (Includes EV):** 1,24,809 units (Q1 FY26) vs. 1,38,682 units (Q1 FY25) - a decrease of 10% year-on-year.\n        *   **PV Domestic Sales (Includes EV):** 1,23,839 units (Q1 FY26) vs. 1,38,104 units (Q1 FY25) - a decline of 10%.\n        *   **PV IB Sales:** 970 units (Q1 FY26) vs. 578 units (Q1 FY25) - a growth of 68%.\n        *   **EV Sales (Domestic + IB):** 16,231 units (Q1 FY26) vs. 16,579 units (Q1 FY25) - a slight decrease of 2% year-on-year. However, the announcement also states \"EV sales gained strong momentum towards the end of the quarter with a healthy growth trajectory.\"\n        *   **PV Segment Performance Highlights:**\n            *   EV Sales up 12% in June '25 over June '24 (5,228 units vs 4,657 units).\n            *   Refreshed Tiago posted 16% YoY volume growth in Q1 FY26.\n            *   New launches: Altroz and Harrier.ev received positive market response.\n        *   **PV Management Commentary (Mr. Shailesh Chandra):** Industry experienced volume pressures in May/June due to soft demand. EV segment is a bright spot with robust growth and new model launches. Tata Motors positioned to outperform with new launches.\n    *   **New Product Launches/Initiatives:**\n        *   India's most affordable mini-truck, the Ace Pro (petrol, bi-fuel, electric).\n        *   Air-conditioned cabins across the entire range of light to heavy trucks.\n        *   Expansion into Egypt and the Middle East & North African region for CVs.\n        *   Launch of Altroz and Harrier.ev for PVs.\n*   **Comparative Importance/Weight:** **9/10**\n    *   This is a critical sales update that provides a consolidated view of the company's performance and sentiment from key management. The year-on-year decline in total sales, CV, and PV segments is a significant point, while the growth in CV exports and the positive outlook for CVs are encouraging. The performance of the EV segment and new model launches are also key indicators of future growth.\n\n### 3. Announcement: Closure of Trading Window\n\n*   **Date of Article:** June 23, 2025\n*   **Summary of Announcement:** This is a standard regulatory announcement informing stakeholders about the closure of the trading window for Tata Motors' securities. The window is closed in connection with the declaration of the company's financial results for the first quarter ending June 30, 2025. The trading window will reopen 48 hours after the results are announced.\n*   **Key Dates, Metrics, and Figures:**\n    *   **Trading Window Closure Date:** Tuesday, June 24, 2025.\n    *   **Reason:** Declaration of Financial Results for the quarter ending June 30, 2025.\n    *   **Trading Window Reopening:** 48 hours after the financial results are declared.\n*   **Comparative Importance/Weight:** **5/10**\n    *   While important for compliance and market signaling (indicating upcoming results), this announcement does not contain specific financial performance data. Its significance lies in its timing relative to the Q1 FY26 results.\n\n### 4. Announcement: Shareholder Meeting / Postal Ballot-Outcome of AGM 20 Jun\n\n*   **Date of Article:** June 20, 2025\n*   **Summary of Announcement:** This announcement details the outcome of Tata Motors' 80th Annual General Meeting (AGM) held on June 20, 2025. It confirms that all businesses transacted at the AGM were passed by shareholders with the requisite majority. The announcement includes a summary of the proceedings, voting results, and the scrutinizer's report.\n*   **Key Dates, Metrics, and Figures:**\n    *   **Event:** 80th Annual General Meeting (AGM).\n    *   **Date of AGM:** Friday, June 20, 2025.\n    *   **Meeting Conduct:** Via Video Conferencing (VC) / Other Audio-Visual Means (OAVM).\n    *   **Outcome:** All resolutions transacted were passed with the requisite majority.\n    *   **Key Resolutions Passed (Ordinary/Special):**\n        *   Adoption of Audited Standalone and Consolidated Financial Statements for FY ended March 31, 2025.\n        *   Declaration of dividend on Ordinary Shares for FY ended March 31, 2025.\n        *   Appointment/Re-appointment of Directors (Mr. N Chandrasekaran, Mr. Guenter Karl Butschek, Mr. Kosaraju Veerayya Chowdary).\n        *   Appointment of Secretarial Auditor (M/s Parikh & Associates) for five years.\n        *   Ratification of Cost Auditor's Remuneration.\n        *   Appointment of Branch Auditors.\n        *   Approval of Material Related Party Transactions (RPTs) across various subsidiaries and entities, including with Tata Cummins, Tata Advanced Systems, Automobile Corporation of Goa, Tata Technologies, JLR subsidiaries, Tata Capital, Fiat India, Tata AutoComp entities, Tata Steel, etc.\n    *   **Voting Details:** The PDF provides detailed voting results for each resolution, showing the number of votes cast in favor and against, and the percentage of votes polled. For most resolutions, the support was overwhelmingly positive (>99%). Some resolutions, like the appointment of Directors, saw a small percentage of dissent (e.g., Resolution 4: 2.54% against, Resolution 5: 11.18% against).\n*   **Comparative Importance/Weight:** **7/10**\n    *   This is a significant corporate governance announcement. The successful passage of all resolutions, especially the financial statements, dividend declaration, and related party transactions, is positive for the company. The voting patterns, particularly for director appointments and RPTs, can provide insights into shareholder sentiment. The detailed breakdown of RPTs is also important for understanding inter-company dealings.\n\n---\n\n**Overall Analysis of Recent Announcements:**\n\nThe provided announcements cover a mix of operational performance, corporate governance, and pre-result disclosures for Tata Motors in the period leading up to and including early July 2025.\n\n*   **Sales Performance (Q1 FY26):** The most impactful news comes from the Q1 FY26 sales report. A year-on-year decline in overall sales for both Commercial Vehicles (CV) and Passenger Vehicles (PV) is a concern, indicating a challenging market environment or specific company-specific factors. However, the strong growth in CV exports and the positive commentary on the EV segment and new PV launches (Altroz, Harrier.ev) offer some positive signals. The management's forward-looking statements suggesting expected improvement in the CV segment due to macro factors are also noteworthy.\n*   **AGM Outcome:** The successful passing of all resolutions at the AGM, including financial statements, dividend, and numerous related party transactions, indicates smooth sailing on the corporate governance front and shareholder approval for the company's ongoing strategies and relationships. The high levels of shareholder approval for most resolutions suggest strong support from the shareholder base.\n*   **Trading Window Closure:** This is a procedural announcement, signaling the imminent release of Q1 FY26 financial results. Its importance is tied to the upcoming financial disclosure.\n\nIn summary, the recent announcements paint a picture of a company navigating a somewhat subdued market for its core vehicle segments (PV and CV domestic sales) but showing resilience and strategic focus in exports, electric mobility, and new product development. The AGM outcome reinforces a stable governance framework. Investors will be closely watching the upcoming financial results for a deeper understanding of the company's profitability and financial health in Q1 FY26."
            }
        ]
    }


def get_stub_error_response():
    """
    Returns a mock error response for testing error handling.
    
    Returns:
        dict: Mock error response
    """
    return {
        "error": "Service temporarily unavailable",
        "message": "AI models are currently offline for maintenance",
        "status_code": 503,
        "timestamp": "2024-01-15T10:30:00Z"
    }


def get_stub_loading_response():
    """
    Returns a mock loading response for testing loading states.
    
    Returns:
        dict: Mock loading response
    """
    return {
        "status": "processing",
        "message": "AI models are analyzing market data...",
        "progress": 65,
        "estimated_time": "30 seconds"
    } 